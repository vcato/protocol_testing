This repo shows an example of abstracting sockets and file descriptors to allow for unit-testing network protocols.
